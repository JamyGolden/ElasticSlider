/**
 * ElasticSlider-core - A carousel for developers.
 * @version v0.5.0
 * @link 
 * @license MIT
 */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),ElasticSlider=function(){function e(t,i){_classCallCheck(this,e),this.NAMESPACE="ElasticSlider",this.options=this._filterOptions(i),this.CLASS_NAME_LIST={container:this.NAMESPACE+"-container",item:this.NAMESPACE+"-item",itemActive:this.NAMESPACE+"-item--isActive",itemClone:this.NAMESPACE+"-item--clone"},this._properties=new Map,this._checkClassRequirements(t),this._animationFunctionHash={},this._slideCount=null,this._initialAnimationDelay=50,this._startAnimationUserCallback=function(){},this._endAnimationUserCallback=function(){},this._createAnimationFunctions(),this.elementList={},this.elementList.slider=t,this.elementList.containerEl=this.elementList.slider.querySelector("."+this.CLASS_NAME_LIST.container),this.elementList.slideArr=this.elementList.containerEl.children,this.elementList.slideActiveEl=this.elementList.slideArr[this.options.activeSlide-1],this.elementList.cloneEl=null,this._slideCount=this.elementList.slideArr.length,this.setProp("activeSlideIndex",this.options.activeSlide-1),this.setProp("nextActiveSlideIndex",this.options.activeSlide),this.setProp("isAnimating",!1),this.elementList.slider.classList.add(this.NAMESPACE);for(var n=0;n<this.elementList.slideArr.length;n++){var s=this.elementList.slideArr[n];s.classList.add(this.CLASS_NAME_LIST.item)}this._setActiveSlide(this.getProp("activeSlideIndex")),this._addCustomAnimationFunctions()}return _createClass(e,[{key:"destroy",value:function(){for(var e in this.CLASS_NAME_LIST)if(0===e.indexOf("item")){var t=this.elementList.slider.querySelectorAll("."+this.CLASS_NAME_LIST[e]);if(t.length)for(var i=0;i<t.length;i++){var n=t[i];n.classList.remove(""+this.CLASS_NAME_LIST[e])}}this.elementList.slider.classList.remove(this.NAMESPACE)}},{key:"toSlide",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e,i=t.index,n=t.animation,s=t.startAnimationCallback,l=t.endAnimationCallback;this._typeTest("number",e)?(e={index:e},i=e.index):this._typeTest("object",e)||console.error("ElasticSlider.toSlide: params is expected to be an object. Eg. {index: 5}"),this._typeTest("string",n)||(n=this.options.animation),i!==this.getProp("activeSlideIndex")&&this.getProp("isAnimating")!==!0&&(!this._typeTest("number",i)||i>this._slideCount-1?i=0:0>i&&(i=this._slideCount-1),this._toggleActiveVideo(this.elementList.slideActiveEl.querySelectorAll("iframe"),!1),this._createTransitionEl(i),this.setProp("nextActiveSlideIndex",i),this.setProp("isAnimating",!0),this._typeTest("function",s)&&(this._startAnimationUserCallback=s),this._typeTest("function",l)&&(this._endAnimationUserCallback=l),this._typeTest("string",n)?(this._startAnimationUserCallback(),this._animationFunctionHash[n](this,i+1)):this._endSlide(i))}},{key:"animationInit",value:function(e){this._typeTest("function",e)&&(e=e.bind(this))()}},{key:"animationStart",value:function(e){var t=this,i=this;window.setTimeout(function(){t._typeTest("function",e)&&(e=e.bind(i))()},this._initialAnimationDelay)}},{key:"animationEnd",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?100:arguments[0],i=arguments[1],n=this,s=t+this._initialAnimationDelay;window.setTimeout(function(){e._typeTest("function",i)&&(i=i.bind(n))(),n._endSlide()},s)}},{key:"addAnimationFunction",value:function(e,t){this._typeTest("string",e)&&this._typeTest("function",t)?this._animationFunctionHash[e]=t.bind(this):console.error("ElasticSlider.addAnimationFunction: Parameters must be name<String>, func<Function>")}},{key:"getElement",value:function(e){return this.elementList[e]}},{key:"getProp",value:function(e){return this._properties.get(e)}},{key:"setProp",value:function(e,t){this._properties.set(e,t)}},{key:"removeProp",value:function(e,t){this._properties["delete"](e)}},{key:"_filterOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this._typeTest("number",e.activeSlide)||(e.activeSlide=1),this._typeTest("string",e.animation)||(e.animation="slide"),e}},{key:"_checkClassRequirements",value:function(e){var t=[this.CLASS_NAME_LIST.container];t.forEach(function(t){var i=e.querySelector("."+t);if(!i)throw"Required element ."+t+" missing. Please use an ElasticSlider UI plugin or read the documentation."})}},{key:"_endSlide",value:function(){this._setActiveSlide(),this.setProp("isAnimating",!1),this.elementList.containerEl.removeChild(this.elementList.cloneEl),this.elementList.cloneEl=null,this._endAnimationUserCallback(),this._toggleActiveVideo(this.elementList.slideActiveEl.querySelectorAll("iframe"),!0),this._startAnimationUserCallback=function(){},this._endAnimationUserCallback=function(){}}},{key:"_setActiveSlide",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?this.getProp("nextActiveSlideIndex"):arguments[0],t=0;t<this.elementList.slideArr.length;t++){var i=this.elementList.slideArr[t];i.classList.remove(this.CLASS_NAME_LIST.itemActive)}this.elementList.slideActiveEl=this.elementList.slideArr[e],this.elementList.slideActiveEl.classList.add(this.CLASS_NAME_LIST.itemActive),this.setProp("activeSlideIndex",e),this.setProp("nextActiveSlideIndex",null)}},{key:"_createTransitionEl",value:function(e){this.elementList.cloneEl&&this.elementList.containerEl.removeChild(this.elementList.cloneEl),this.elementList.cloneEl=this.elementList.slideArr[e].cloneNode(!0),this.elementList.cloneEl.classList.add(this.CLASS_NAME_LIST.itemClone),this.elementList.containerEl.appendChild(this.elementList.cloneEl)}},{key:"_createAnimationFunctions",value:function(){var e=this;this.addAnimationFunction("fade",function(){e.animationInit(function(){e.elementList.cloneEl.classList.add(e.NAMESPACE+"-item--animateFadeInit")}),e.animationStart(function(){e.elementList.cloneEl.classList.add(e.NAMESPACE+"-item--animateFadeStart")}),e.animationEnd(600)}),this.addAnimationFunction("slide",function(){var t=null,i=e.getProp("animationDirection"),n=e.getProp("nextActiveSlideIndex"),s=e.getProp("activeSlideIndex");t=i?i:n>s?"next":"prev",t=t.substring(0,1).toUpperCase()+t.substring(1),e.animationInit(function(){e.elementList.cloneEl.classList.add(e.NAMESPACE+"-item--animate"+t+"SlideInit"),e.elementList.slideActiveEl.classList.add(e.NAMESPACE+"-item--animateActive"+t+"SlideInit")}),e.animationStart(function(){e.elementList.cloneEl.classList.add(e.NAMESPACE+"-item--animate"+t+"SlideStart"),e.elementList.slideActiveEl.classList.add(e.NAMESPACE+"-item--animateActive"+t+"SlideStart")}),e.animationEnd(1e3,function(){e.elementList.slideActiveEl.classList.remove(e.NAMESPACE+"-item--animateActive"+t+"SlideInit"),e.elementList.slideActiveEl.classList.remove(e.NAMESPACE+"-item--animateActive"+t+"SlideStart"),e.removeProp("animationDirection")})})}},{key:"_addCustomAnimationFunctions",value:function(){var e=window.elasticSliderAnimationMap;if(this._typeTest("object",e))for(var t in e)this.addAnimationFunction(t,e[t])}},{key:"_typeTest",value:function(e,t){var i=!1;switch(e){case"object":"object"===("undefined"==typeof t?"undefined":_typeof(t))&&null!==t&&"undefined"==typeof t.length&&(i=!0);break;case"array":"object"===("undefined"==typeof t?"undefined":_typeof(t))&&null!==t&&"number"==typeof t.length&&(i=!0);break;case"function":"function"==typeof t&&(i=!0);break;case"string":"string"==typeof t&&(i=!0);break;case"boolean":"boolean"==typeof t&&(i=!0);break;case"number":"number"!=typeof t||isNaN(t)||(i=!0)}return i}},{key:"_toggleActiveVideo",value:function(e,t){var i=t===!0?"playVideo":"pauseVideo";if(e.length)for(var n=0;n<e.length;n++)-1!==e[n].src.indexOf("enablejsapi=true")&&e[n].contentWindow.postMessage('{"event":"command","func":"'+i+'","args":""}',"*")}}]),e}();if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports)module.exports=ElasticSlider;else{var obj=window;obj.ElasticSlider=ElasticSlider}